<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ARGOBOTS: Future</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ARGOBOTS
   &#160;<span id="projectnumber">64b8ee9a4f77e4a8fd77ff60f0dd18812cd7633b</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Future</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga45f13d86bf617e1996d9869ea227d0b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga45f13d86bf617e1996d9869ea227d0b8">ABT_future_create</a> (uint32_t compartments, void(*cb_func)(void **arg), <a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> *newfuture)</td></tr>
<tr class="memdesc:ga45f13d86bf617e1996d9869ea227d0b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a future.  <a href="#ga45f13d86bf617e1996d9869ea227d0b8">More...</a><br/></td></tr>
<tr class="separator:ga45f13d86bf617e1996d9869ea227d0b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e85de2029217ff8986bffeefff50637"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga3e85de2029217ff8986bffeefff50637">ABT_future_free</a> (<a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> *future)</td></tr>
<tr class="memdesc:ga3e85de2029217ff8986bffeefff50637"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the future object.  <a href="#ga3e85de2029217ff8986bffeefff50637">More...</a><br/></td></tr>
<tr class="separator:ga3e85de2029217ff8986bffeefff50637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dbdd249a5091a3c50740437d8d7e424"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga5dbdd249a5091a3c50740437d8d7e424">ABT_future_wait</a> (<a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> future)</td></tr>
<tr class="memdesc:ga5dbdd249a5091a3c50740437d8d7e424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait on the future.  <a href="#ga5dbdd249a5091a3c50740437d8d7e424">More...</a><br/></td></tr>
<tr class="separator:ga5dbdd249a5091a3c50740437d8d7e424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d0f970118b9fd17e6eecff675d56f60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga7d0f970118b9fd17e6eecff675d56f60">ABT_future_test</a> (<a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> future, <a class="el" href="../../d5/d7d/abt_8h.html#a28854ddb62b26e4a2ee42132671bbef0">ABT_bool</a> *flag)</td></tr>
<tr class="memdesc:ga7d0f970118b9fd17e6eecff675d56f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether the future is ready.  <a href="#ga7d0f970118b9fd17e6eecff675d56f60">More...</a><br/></td></tr>
<tr class="separator:ga7d0f970118b9fd17e6eecff675d56f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5711cff15789de2abcf0e7532f61b376"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga5711cff15789de2abcf0e7532f61b376">ABT_future_set</a> (<a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> future, void *value)</td></tr>
<tr class="memdesc:ga5711cff15789de2abcf0e7532f61b376"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal the future.  <a href="#ga5711cff15789de2abcf0e7532f61b376">More...</a><br/></td></tr>
<tr class="separator:ga5711cff15789de2abcf0e7532f61b376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7174f1f51c89e54ae6a029fb1d130c43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd2/group__FUTURE.html#ga7174f1f51c89e54ae6a029fb1d130c43">ABT_future_reset</a> (<a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> future)</td></tr>
<tr class="memdesc:ga7174f1f51c89e54ae6a029fb1d130c43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the readiness of the target future.  <a href="#ga7174f1f51c89e54ae6a029fb1d130c43">More...</a><br/></td></tr>
<tr class="separator:ga7174f1f51c89e54ae6a029fb1d130c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A future, an eventual, or a <em>promise</em>, is a mechanism for passing a value between threads, allowing a thread to wait for a value that is set asynchronously. It is used to increase concurrency in a parallel program. This construction is really popular in functional programming languages, in particular MultiLisp. If the programmer defines a future containing an expression, the runtime system <em>promises</em> to evaluate that expression concurrently. The resulting value of the expression might not be available immediately, but it will be eventually computed. Therefore, futures also require a synchronization interface between the program and the multiple concurrent threads that may be computing portions of the code.</p>
<p>In Argobots, futures are used with the purpose of synchronizing execution between cooperating concurrent ULTs. There are two basic mechanisms implemented, <a class="el" href="../../da/d22/group__EVENTUAL.html">eventuals</a> and futures.</p>
<p>A <em>future</em> in Argobots has a slightly different behavior. A future is created with a number of <em>compartments</em>. Each of those <em>k</em> compartments will be set by contributing ULTs. Any other ULT will block on a future until all the compartments have been set. In some sense, a future is a multiple-buffer extension of an eventual. Eventuals and futures have a different philosophy of memory management. An eventual will create and destroy the memory buffer that will hold a result. In contrast, a future does not create any buffer. Therefore, a future assumes each contributing ULT allocates and destroys all memory buffers. When a contributing ULT sets a value, it just passes a pointer to the particular memory location. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga45f13d86bf617e1996d9869ea227d0b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_create </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>compartments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void **arg)&#160;</td>
          <td class="paramname"><em>cb_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> *&#160;</td>
          <td class="paramname"><em>newfuture</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a future. </p>
<p><code>ABT_future_create</code> creates a future and returns a handle to the newly created future into <code>newfuture</code>. This routine allocates an array with as many <code>compartments</code> as defined. Each compartment consists in a void* pointer. The future has a counter to determine whether all contributions have been made. This routine also creates a list of entries for all the ULTs that will be blocked waiting for the future to be ready. The list is initially empty. The entries in the list are set with the same order as the <code>ABT_future_set</code> are terminated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">compartments</td><td>number of compartments in the future </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_func</td><td>callback function to be called once the future is ready </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">newfuture</td><td>handle to a new future </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00056">56</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga3e85de2029217ff8986bffeefff50637"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a> *&#160;</td>
          <td class="paramname"><em>future</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the future object. </p>
<p><code>ABT_future_free</code> releases memory associated with the future <code>future</code>. It also deallocates the array of compartments of the future. If it is successfully processed, <code>future</code> is set to <code>ABT_FUTURE_NULL</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">future</td><td>handle to the future </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00093">93</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7174f1f51c89e54ae6a029fb1d130c43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a>&#160;</td>
          <td class="paramname"><em>future</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the readiness of the target future. </p>
<p><code><a class="el" href="../../de/dd2/group__FUTURE.html#ga7174f1f51c89e54ae6a029fb1d130c43" title="Reset the readiness of the target future. ">ABT_future_reset()</a></code> resets the readiness of the target future <code>future</code> so that it can be reused. That is, it makes <code>future</code> unready irrespective of its readiness.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">future</td><td>handle to the target future </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00299">299</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5711cff15789de2abcf0e7532f61b376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a>&#160;</td>
          <td class="paramname"><em>future</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal the future. </p>
<p><code>ABT_future_set</code> sets a value in the future's array. If all the contributions have been received, this routine awakes all ULTs waiting on the future <code>future</code>. In that case, all ULTs waiting on this future will be ready to be scheduled. If there are contributions still missing, this routine will store the pointer passed by parameter <code>value</code> and increase the internal counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">future</td><td>handle to the future </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>pointer to the memory buffer containing the data that will be pointed by one compartment of the future </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00228">228</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7d0f970118b9fd17e6eecff675d56f60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a>&#160;</td>
          <td class="paramname"><em>future</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#a28854ddb62b26e4a2ee42132671bbef0">ABT_bool</a> *&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test whether the future is ready. </p>
<p><code>ABT_future_test</code> is a non-blocking function that tests whether the future <code>future</code> is ready or not. It returns the result through <code>flag</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">future</td><td>handle to the future </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">flag</td><td><code>ABT_TRUE</code> if future is ready; otherwise, <code>ABT_FALSE</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00201">201</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5dbdd249a5091a3c50740437d8d7e424"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ABT_future_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d7d/abt_8h.html#afd02cb9f6153347103ab39c51cb54182">ABT_future</a>&#160;</td>
          <td class="paramname"><em>future</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait on the future. </p>
<p><code>ABT_future_wait</code> blocks the caller ULT until the future <code>future</code> is resolved. If the future is not ready, the ULT calling this routine suspends and goes to state BLOCKED. Internally, an entry is created per each blocked ULT to be awaken when the future is signaled. If the future is ready, this routine returns immediately. The system keeps a list of all the ULTs waiting on the future.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">future</td><td>handle to the future </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ABT_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/df6/futures_8c_source.html#l00125">125</a> of file <a class="el" href="../../dc/df6/futures_8c_source.html">futures.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 7 2020 03:09:58 for ARGOBOTS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
